{% extends 'base.html' %}
{% block head_title %}
    Project Details
{% endblock head_title %}
{% block content %}
<div class="card mt-4">
    <div class="card-header bg-primary text-white text-center">
        <h2>Project: {{ project.name }}</h2>
    </div>
    <div class="card-body">
        <p>{{ project.description }}</p>
        <p><strong>Progress:</strong> {{ project.progress }}%</p>
        <h3>Members</h3>
        <ul class="list-group mb-3">
            {% for member in project.members.all %}
                <li class="list-group-item">{{ member.username }}</li>
            {% endfor %}
        </ul>
        {% if project.created_by == user %}
            <a href="{% url 'add_member' project.pk %}" class="btn btn-secondary mb-3">Add Member</a>
            <a href="{% url 'create_task' project.pk %}" class="btn btn-secondary mb-3">Add Task</a>
        {% endif %}
        <h3>Tasks</h3>
        <ul class="list-group">
            {% for task in tasks %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ task.name }} - {{ task.assigned_to.username }} - {% if task.completed %}Completed{% else %}Pending{% endif %}
                    {% if task.assigned_to == user %}
                        <a href="{% url 'update_task_progress' task.pk %}" class="btn btn-sm btn-secondary">Update Progress</a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
        <a href="{% url 'dashboard' %}" class="btn btn-primary mt-3">Back to Dashboard</a>
    </div>
</div>
{% endblock content %}
